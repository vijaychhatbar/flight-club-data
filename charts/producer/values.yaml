replicaCount: 1

image:
  repository: opensky-producer
  pullPolicy: IfNotPresent
  tag: latest

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 8080

resources:
  limits:
    cpu: 2000m
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 1Gi

livenessProbe:
  exec:
    command:
      - python3
      - -c
      - "import sys; sys.exit(0)"
  initialDelaySeconds: 30
  periodSeconds: 10

config:
  KAFKA_BOOTSTRAP_SERVERS: "kafka-0.kafka.kafka.svc.cluster.local:9092,kafka-1.kafka.kafka.svc.cluster.local:9092,kafka-2.kafka.kafka.svc.cluster.local:9092"
  KAFKA_TOPIC: "flight-data"
  SCHEMA_REGISTRY_URL: "http://schema-registry-svc:8081"
  OPENSKY_API_URL: "https://opensky-network.org/api/states/all"
  FETCH_INTERVAL_SECONDS: "300"
  LOG_LEVEL: "INFO"

secrets:
  OPENSKY_CLIENT_ID: ""
  OPENSKY_CLIENT_SECRET: ""
  # These will be populated from .env file at deployment time

initContainers:
  - name: wait-for-kafka
    image: busybox:1.36
    command:
      - sh
      - -c
      - |
        echo "Waiting for Kafka to be ready..."
        until nc -z kafka-0.kafka.kafka.svc.cluster.local 9092; do
          echo "Kafka not ready, waiting..."
          sleep 5
        done
        echo "Kafka is ready!"
  - name: wait-for-schema-registry
    image: busybox:1.36
    command:
      - sh
      - -c
      - |
        echo "Waiting for Schema Registry to be ready..."
        until nc -z schema-registry-svc 8081; do
          echo "Schema Registry not ready, waiting..."
          sleep 5
        done
        echo "Schema Registry is ready!"

nodeSelector: {}

tolerations: []

affinity: {}
